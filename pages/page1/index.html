<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Page Title</title>
    <script src="../../node_modules/jquery/dist/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" media="screen" href="../../node_modules/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="../../main.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- <link rel="stylesheet" type="text/css" media="screen" href="main.css" />
    <script src="main.js"></script> -->
    <style type='text/css'>
            .embeddedServiceHelpButton .helpButton .uiButton { background-color: #005290; font-family: "Salesforce Sans", sans-serif; }
            .embeddedServiceHelpButton .helpButton .uiButton:focus { outline: 1px solid #005290; }
            @font-face {
            font-family: 'Salesforce Sans';
            src: url('https://www.sfdcstatic.com/system/shared/common/assets/fonts/SalesforceSans/SalesforceSans-Regular.woff') format('woff'),
    url('https://www.sfdcstatic.com/system/shared/common/assets/fonts/SalesforceSans/SalesforceSans-Regular.ttf') format('truetype');
            }
    </style>



     
</head>
<body>
    <nav class="navbar navbar-light bg-light">
    <a class="navbar-brand" href="#">
        <img src="../../assets/DellTech_Logo_Prm_Blue.jpg" class="d-inline-block align-top" alt="">
    </a>
</nav>
<div class="navigationLink">
                    <a href="../../index.html" target="_blank">Home</a>
                    <a href="../page2/index.html" target="_blank" href="#" >Live Agent (In New Tab)</a>
                    <a href="../page3/index.html" target="_blank">Resume Chat (In New Tab)</a>
</div>    
    <div class="new-chat" style="margin-top: 20px;">
        <div class="row justify-content-md-center">
                <div class="col-lg-6 col-md-8 col-sm-12 order-md-1  border rounded">
                                <form class="needs-validation" novalidate="">

                                        <div class="mb-3">
                                                <label for="serviceTag" style="margin-top: 10px;">Service Tag </label>
                                                <div class="input-group">
                                                    <input type="text" class="form-control" id="serviceTag" placeholder="Service Tag example : 261KZ72" required="" value= "261KZ72">
                                                    <div class="invalid-feedback" style="width: 100%;">
                                                       Service Tag is a required field.
                                                    </div>
                                                </div>
                                            </div>

                                    <div class="row"> 
                                    <div class="col-md-6 mb-3">
                                      <label for="firstName">First name</label>
                                      <input type="text" class="form-control" id="firstName" placeholder="" value="" required="">
                                      <div class="invalid-feedback">
                                        Valid first name is required.
                                      </div>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                      <label for="lastName">Last name</label>
                                      <input type="text" class="form-control" id="lastName" placeholder="" value="" required="">
                                      <div class="invalid-feedback">
                                        Valid last name is required.
                                      </div>
                                    </div>
                                  </div>
                      
                                  <div class="mb-3">
                                    <label for="emailId">Email ID</label>
                                    <div class="input-group">
                                      <div class="input-group-prepend">
                                        <span class="input-group-text">@</span>
                                      </div>
                                      <input type="text" class="form-control" id="emailId" placeholder="Email Id" required="">
                                      <div class="invalid-feedback" style="width: 100%;">
                                        Your email id is required.
                                      </div>
                                    </div>
                                  </div>
                      
                      
                                  <div class="mb-3">
                                    <label for="phoneNumber">Phone Number</label>
                                    <input type="text" class="form-control" id="phoneNumber" placeholder="Phone Number" required="">
                                    <div class="invalid-feedback">
                                      Please enter your Phone Number.
                                    </div>
                                  </div>
                      
                                  <div class="mb-3">
                                        <label for="issueType">Issue Type</label>
                                        <select class="custom-select d-block w-100" id="issueType" required="">
                                                <option value="">Choose...</option>
                                                <option>Slow Performance</option>
                                                <option>Keyboard not working</option>
                                                <option>Touch pad not working</option>
                                              </select>
                                        <div class="invalid-feedback">
                                          Please enter your Issue Type.
                                        </div>
                                      </div>
                                      <div class="mb-3">
                                            <label for="issueDescription">Description</label>
                                            <input type="text" class="form-control" id="issueDescription" placeholder="Description" required="">
                                            <div class="invalid-feedback">
                                              Please enter your Phone Number.
                                            </div>
                                          </div>  
                                  <hr class="mb-4">
                                  <div class="mb-3">
                                      <a  id="liveagent_button_online_Test" class="enabledButton btn btn-primary btn-lg btn-block"  onclick="startSnapinChat()">Check for agent avilabality first</a>
                                  </div>
                                  <div class="mb-3">
                                    <a  id="liveagent_kill" class="enabledButton btn  btn-primary btn-lg btn-block"  onclick="onclickPrechatButton()">Send New Values</a>
                                </div>
                                </form>
                              
                </div>
            </div>
        </div>
    </div>
   
      <style type='text/css'>
        .embeddedServiceHelpButton .helpButton .uiButton {
          background-color: #007db8;
          font-family: "Roboto Regular", sans-serif;
        }
        .embeddedServiceHelpButton .helpButton .uiButton:focus {
          outline: 1px solid #007db8;
        }
      </style>
      
      <script type='text/javascript' src='https://service.force.com/embeddedservice/5.0/esw.min.js'></script>
      <script type='text/javascript'>
      function onclickPrechatButton() {
        let state = embedded_svc.sidebarInstanceMap[Object.keys(embedded_svc.sidebarInstanceMap)[0]].getActiveState();
        let prechatFields = state.get("v.prechatFields");
        prechatFields.forEach(function (prechatField) {
          if (prechatField.label === "First Name") {
            prechatField.value = "Will"
          } else if (prechatField.label === "Last Name") {
            prechatField.value = "Chang"
          } else if (prechatField.label === "Email Address"){
            prechatField.value = "willChang@dell.com" 
          }
        });
        state.set("v.prechatFields", prechatFields);
      }
      function startSnapinChat(){
        

        serviceTag = document.getElementById('serviceTag').value,
                firstName = document.getElementById('firstName').value,
                lastName = document.getElementById('lastName').value,
                emailId = document.getElementById('emailId').value,
                phoneNumber = document.getElementById('phoneNumber').value,
                issueType = document.getElementById('issueType').value,
                issueDescription = document.getElementById('issueDescription').value;
        var initESW = function(gslbBaseURL) {
          embedded_svc.settings.displayHelpButton = true; //Or false
          embedded_svc.settings.language = ''; //For example, enter 'en' or 'en-US'
      
          //embedded_svc.settings.defaultMinimizedText = '...'; //(Defaults to Chat with an Expert)
          //embedded_svc.settings.disabledMinimizedText = '...'; //(Defaults to Agent Offline)
      
          //embedded_svc.settings.loadingText = ''; //(Defaults to Loading)
          //embedded_svc.settings.storageDomain = 'yourdomain.com'; //(Sets the domain for your deployment so that visitors can navigate subdomains during a chat session)
      
          // Settings for Live Agent
          //embedded_svc.settings.directToButtonRouting = function(prechatFormData) {
            // Dynamically changes the button ID based on what the visitor enters in the pre-chat form.
            // Returns a valid button ID.
          //};
          //embedded_svc.settings.prepopulatedPrechatFields = {}; //Sets the auto-population of pre-chat form fields
          //embedded_svc.settings.fallbackRouting = []; //An array of button IDs, user IDs, or userId_buttonId
          //embedded_svc.settings.offlineSupportMinimizedText = '...'; //(Defaults to Contact Us)
            
          embedded_svc.settings.extraPrechatFormDetails = [{
                "label": "First Name",
                "value": firstName,
                "transcriptFields": ["FirstName__C"]
              }, 
              {
                "label": "Last Name",
                "value": lastName,
                "transcriptFields": ["LastName__c"]
              }, 
              {
                "label": "Email Address",
                "value": emailId,
                "transcriptFields": ["Email__c"]
              }, 
              {
                "label": "Primary Phone Number",
                "value": phoneNumber,
                "transcriptFields": ["ContactNumber__c"]
              },
              {
                "label": "Subject",
                "value": issueType,
                "transcriptFields": ["Issue__c"]
              }, 
              {
                  "label": "Issue Description",
                  "value": issueDescription,
                  "transcriptFields": ["Description__c"]
              },
              {
                  "label": "AccountNumber",
                  "value": "2701",
                  "transcriptFields": ["CustomerNumber__c"]
              }, 
              {
                  "label": "Account BUID",
                  "value": "11",
                  "transcriptFields": ["CustomerBUID__c"]
              },
              {
                "label": "Service Tag",
                "value": serviceTag,
                "transcriptFields": ["Service_Tag__C"]
              } 
            ];
            
        embedded_svc.settings.extraPrechatInfo = [{
              "entityFieldMaps": [{
                "doCreate":false,
                "doFind":true,
                "fieldName":"Name",
                "isExactMatch":true,
                "label":"Service Tag"
                }
              ],
              "entityName":"Asset",
              "saveToTranscript": "Asset__c"
            }
        ]; 		 

          embedded_svc.settings.enabledFeatures = ['LiveAgent'];
          embedded_svc.settings.entryFeature = 'LiveAgent';
      
          embedded_svc.init(
            'https://dellservices--DEV2.my.salesforce.com',
            'https://dev2-dellservices.cs47.force.com/LASnapIn',
            gslbBaseURL,
            '00D2a0000008e0t',
            'Snap_Ins_Resume_chat',
            {
              baseLiveAgentContentURL: 'https://c.la2-c2cs-iad.salesforceliveagent.com/content',
              deploymentId: '5720b000000GneC',
              buttonId: '5730b000000CbhY',
              baseLiveAgentURL: 'https://d.la2-c2cs-iad.salesforceliveagent.com/chat',
              eswLiveAgentDevName: 'EmbeddedServiceLiveAgent_Parent04I0b000000blJOEAY_16520ef73c5',
              isOfflineSupportEnabled: false
            }
          );
        };
      
        if (!window.embedded_svc) {
          var s = document.createElement('script');
          s.setAttribute('src', 'https://dellservices--DEV2.my.salesforce.com/embeddedservice/5.0/esw.min.js');
          s.onload = function() {
            initESW(null);
          };
          document.body.appendChild(s);
        } else {
          initESW('https://service.force.com');
        }
      }
      function killSnapin(){
       // alert("ending");
       // window.startSnapinChat=function(){return false;};
       // window.initESW=function(){return false;};
       embedded_svc.settings.extraPrechatFormDetails = [{
                "label": "First Name",
                "value": 'Test',
                "transcriptFields": ["FirstName__C"]
              }
            ];
      }
     
      </script>  
</body>
</html>